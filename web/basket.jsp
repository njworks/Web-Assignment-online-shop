<%@ page import="java.util.Collection,                 java.util.Iterator,                 shop.Product"%><%@ page import="static shop.Basket.store" %><jsp:useBean id='basket'         scope='session'         class='shop.Basket'          /><%    String empty = request.getParameter("emptyBasket");    String clearing = request.getParameter("clear");    Collection items = basket.getItems();    if (empty!=null) {        basket.clearBasket();    }    else if (clearing!=null) {         basket.removeItem(clearing);    }    else {       String item = request.getParameter("addItem");        if (store.get(item) != null ){        }else{            basket.addItem(item);        }    }%><html><head>    <link href="../style.css" rel="stylesheet" type="text/css">    <script>        function validateFormO() {            var x = document.forms["customer"]["name"].value;            if (x == "") {                alert("Name must be filled out");                return false;            }        }    </script>    <title> Basket</title></head><body><div>    <jsp:include page="logo.jsp"></jsp:include>    <jsp:include page="searchmenu.jsp"></jsp:include>    <jsp:include page="navigation.jsp"></jsp:include></div><div class="main"><table class="table1">    <tr>        <th> Item </th> <th>Image </th> <th> Price per Item </th> <th>Current Quantity </th> <th>Enter Quantity</th> <th>Update</th> <th>Total</th>    </tr>    <%//        Collection items = basket.getItems();        int counter = 0;   for (Iterator i = items.iterator(); i.hasNext();counter++ ) {        Product p = (Product) i.next();       String myText = request.getParameter(String.valueOf(counter));       if (myText == null) {       } else {           if (myText.length() == 0) {           } else {               basket.addMap( p, request.getParameter(String.valueOf(counter)));           }       }%>    <form action="basket.jsp" >    <tr>        <td> <%out.println(p.title);%> </td>        <td> <img src="<%= p.fullimage%>" alt="<%=p.PID%>" width="60" height="50" /> </td>        <td> <%out.println(p.convertprice(p));%> </td>            <td><%out.println(store.get(p.PID));%></td>        <td> <input type="text" name="<%=counter%>" maxlength="2" size="1"> </td>        <td> <input type="submit" value="Update"></td>    </form>        <td><%out.println(basket.eachItemTotal(p));%></td>        <td><a href = '<%="basket.jsp?clear="+p.PID%>'><p> Remove</p></a></td>    </tr>        <%            }            %>    <tr>        <td>Order total = <%= basket.getTotalString() %></td>    </tr>    </table><%    if ( basket.getTotal() > 0) {        %>        <form name="customer" action="order.jsp" onsubmit="return validateFormO()" method="post">        <input type="text" name="name" size="20">        <input type="submit" value="Place Order" />        </form>        <form action="basket.jsp" method="get">        <input type="hidden" name="emptyBasket" value="yes">        <input type="submit" value="Empty Basket" />        </form>        <%    }%></div></body></html>